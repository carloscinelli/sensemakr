<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An introduction to sensitivity analysis using `sensemakr` • sensemakr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="An introduction to sensitivity analysis using `sensemakr`">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sensemakr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/sensemakr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/informal_benchmarking.html">The Risks of Informal Benchmarking</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/carloscinelli/sensemakr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>An introduction to sensitivity analysis using
<code>sensemakr</code>
</h1>
                        <h4 data-toc-skip class="author">Carlos Cinelli
and Chad Hazlett</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/carloscinelli/sensemakr/blob/HEAD/vignettes/sensemakr.Rmd" class="external-link"><code>vignettes/sensemakr.Rmd</code></a></small>
      <div class="hidden name"><code>sensemakr.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The most common strategy for making causal inferences with
observational data is to adjust for observed covariates while making the
untestable assumption that there are no unobserved confounders. Rarely,
however, can those assumptions be expected to hold exactly, and debating
the absence of unobserved confounding <em>qualitatively</em> only gets
us so far. Sensitivity analysis allows us to <em>quantitatively</em>
discuss the fragility of putative causal estimates when the underlying
assumption of no unobserved confounding is challenged.</p>
<p>The <code>R</code> package <code>sensemakr</code> aims to help with
this task, implementing a suite of sensitivity analysis tools that
extend the traditional omitted variable bias framework, as developed in
<a href="https://rss.onlinelibrary.wiley.com/doi/full/10.1111/rssb.12348" class="external-link">Cinelli
and Hazlett (2020)</a>. The goal of <code>sensemakr</code> is to make it
easier to understand the impact that omitted variables would have on a
regression result. This allows analysts to investigate the robustness of
their estimates to unobserved confounding, answering questions such
as:</p>
<ul>
<li>How strong would an unobserved confounder (or a group of
confounders) have to be to change our research conclusions?</li>
<li>In a <em>worst-case</em> scenario, how robust are our results to
<em>all</em> unobserved confounders acting together, possibly
non-linearly?</li>
<li>How strong would confounding need to be <em>relative</em> to the
strength of observed covariates, to change our answer a certain
amount?</li>
</ul>
</div>
<div class="section level2">
<h2 id="violence-in-darfur">Violence in Darfur<a class="anchor" aria-label="anchor" href="#violence-in-darfur"></a>
</h2>
<p>Given that sensitivity analysis requires contextual knowledge to be
properly interpreted, we illustrate the basic functionality of the
package with a real example. Here we reproduce the results found in
Section 5 of <a href="https://rss.onlinelibrary.wiley.com/doi/full/10.1111/rssb.12348" class="external-link">Cinelli
and Hazlett (2020)</a>, which estimates the effects of exposure to
violence on attitudes towards peace, in Darfur. Further details about
this application and the data can be found in <a href="https://journals.sagepub.com/doi/pdf/10.1177/0022002719879217?casa_token=XuE5PCptuI0AAAAA:Mcnx00WfCn2skXPgW9WcNGN_f7qxHM_9PvRSdbLiPQUi0MkfW9VFBpNcwnScJPS2xw4NBZjsTU_u9g" class="external-link">Hazlett
(2019)</a>.
<!-- we just said it comes from this and cited it, so no need to do so again: [Cinelli and Hazlett (2020)](https://rss.onlinelibrary.wiley.com/doi/full/10.1111/rssb.12348).
!--></p>
<div class="section level3">
<h3 id="the-data-and-research-question">The data and research question<a class="anchor" aria-label="anchor" href="#the-data-and-research-question"></a>
</h3>
<p>In 2003 and 2004, the Darfurian government orchestrated a horrific
campaign of violence against civilians, killing an estimated two hundred
thousand people. This application asks whether, on average, being
directly injured or maimed in this episode made individuals more likely
to feel “vengeful” and unwilling to make peace with those who
perpetrated this violence. Or, were those who directly suffered from
such violence most motivated to see it end by making peace?</p>
<p>The <code>sensemakr</code> package comes with an example dataset
drawn from a survey on attitudes of Darfurian refugees in eastern Chad
(Hazlett, 2019). The data can be loaded with the command
<code>data("darfur")</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># loads package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/carloscinelli/sensemakr" class="external-link">sensemakr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># loads data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"darfur"</span><span class="op">)</span></span></code></pre></div>
<p>The “treatment” variable of interest is <code>directlyharmed</code>,
which indicates whether the individual was physically injured or maimed
during the attack on her or his village in Darfur. The main outcome of
interest is <code>peacefactor</code>, an index measuring pro-peace
attitudes. Other covariates in the data include: <code>village</code> (a
factor variable indicating the original village of the respondent),
<code>female</code> (a binary indicator of gender), <code>age</code> (in
years), <code>herder_dar</code> (whether they were a herder in Darfur),
<code>farmer_dar</code> (whether they were a farmer in Darfur), and
<code>past_voted</code> (whether they report having voted in an earlier
election, prior to the conflict). For further details, see
<code><a href="../reference/darfur.html">?darfur</a></code>.</p>
<p>The purpose of these attacks was to punish civilians from ethnic
groups presumed to support the opposition, and to kill or drive these
groups out so as to reduce support for the opposition. Violence against
civilians included aerial bombardments by the government as well as
ground assaults by the <em>Janjaweed</em>, a pro-government militia. Now
suppose a researcher argues that, while some villages were more or less
intensively attacked, within village violence was largely
indiscriminate. The bombings could not be finely targeted owing to their
crudeness, and there were not many reasons to target them. Similarly,
the <em>Janjaweed</em> had no reason to target certain individuals
rather than others, and no information with which to do so—with one
major exception: women were targeted and often subjected to sexual
violence.</p>
<p>Given these considerations, this researcher may argue that adjusting
for <code>village</code> and <code>female</code> is sufficient for
control of confounding, and run the following linear regression model
(in which other pre-treatment covariates, although not necessary for
identification, are also included):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># runs regression model</span></span>
<span><span class="va">darfur.model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">peacefactor</span> <span class="op">~</span> <span class="va">directlyharmed</span>  <span class="op">+</span> <span class="va">village</span> <span class="op">+</span>  <span class="va">female</span> <span class="op">+</span></span>
<span>                     <span class="va">age</span> <span class="op">+</span> <span class="va">farmer_dar</span> <span class="op">+</span> <span class="va">herder_dar</span> <span class="op">+</span> <span class="va">pastvoted</span> <span class="op">+</span> <span class="va">hhsize_darfur</span>, </span>
<span>                   data <span class="op">=</span> <span class="va">darfur</span><span class="op">)</span></span></code></pre></div>
<p>This regression model results in the following estimates:</p>
<pre><code>
===============================================
                        Dependent variable:    
                    ---------------------------
                            peacefactor        
-----------------------------------------------
directlyharmed               0.097***          
                              (0.023)          
                                               
-----------------------------------------------
Observations                   1,276           
R2                             0.512           
Adjusted R2                    0.205           
Residual Std. Error      0.310 (df = 783)      
F Statistic          1.667*** (df = 492; 783)  
===============================================
Note:               *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01</code></pre>
<p>According to such a model, those who were directly harmed in violence
were on average more “pro-peace”, not less.</p>
</div>
<div class="section level3">
<h3 id="the-threat-of-unobserved-confounders">The threat of unobserved confounders<a class="anchor" aria-label="anchor" href="#the-threat-of-unobserved-confounders"></a>
</h3>
<p>The previous estimate requires the assumption of <em>no unobserved
confounders</em> for unbiasedness. While supported by the claim that
there is no targeting of violence within village-gender strata, not all
investigators may agree with this account. For example, one may argue
that, although the bombing was crude, bombs were still more likely to
hit the center of the village, and those in the center would also likely
hold different attitudes towards peace. One may also argue that the
<em>Janjaweed</em> may observe signals that indicate, for example, the
wealth of individuals. Or, perhaps, that an individual’s prior political
attitudes could have led them to take actions that exposed them to
greater risks. To complicate things, all these factors could interact
with each other or otherwise have non-linear effects.</p>
<p>These concerns suggest that, instead of the previous linear model
(<code>darfur.model</code>), we should have run a model such as</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">darfur.complete.model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">peacefactor</span> <span class="op">~</span> <span class="va">directlyharmed</span>  <span class="op">+</span> <span class="va">village</span> <span class="op">+</span>  <span class="va">female</span> <span class="op">+</span></span>
<span>                              <span class="va">age</span> <span class="op">+</span> <span class="va">farmer_dar</span> <span class="op">+</span> <span class="va">herder_dar</span> <span class="op">+</span> <span class="va">pastvoted</span> <span class="op">+</span> <span class="va">hhsize_darfur</span> <span class="op">+</span></span>
<span>                              <span class="va">center</span><span class="op">*</span><span class="va">wealth</span><span class="op">*</span><span class="va">political_attitudes</span>, </span>
<span>                            data <span class="op">=</span> <span class="va">darfur</span><span class="op">)</span></span></code></pre></div>
<p>where <code>center*wealth*political_attitudes</code> is the
<code>R</code> formula for including <em>fully interacted</em> terms for
these three variables. But trying to fit the model
<code>darfur.complete.model</code> will result in an error: none of the
variables <code>center</code>, <code>wealth</code> or
<code>political_attitudes</code> were measured. We can nevertheless ask
questions such as “how strong would these unobserved confounders (or
<em>all</em> remaining unobserved confounders) need to be to change our
previous conclusions?” Or, more precisely, given an assumption on how
strongly these and other omitted variables relate to the treatment and
the outcome, how would including them have changed our inferences
regarding the coefficient of <code>directlyharmed</code>?</p>
<p>Additionally, we have domain knowledge regarding the main
determinants of exposure to violence, such as the special role of gender
in targeting. This knowledge may be used to either aid in interpretation
of the magnitude of confounding required, or to impose limits upon the
strength of unobserved confounding. For instance, even if variables such
as <code>wealth</code> remained as confounders, one could argue that it
is unreasonable to expect that they explain more of the variation of
exposure to violence than does gender. We show how
<code>sensemakr</code> can leverage such claims to bound the plausible
strength of unobserved variables.</p>
</div>
</div>
<div class="section level2">
<h2 id="sensitivity-analysis">Sensitivity Analysis<a class="anchor" aria-label="anchor" href="#sensitivity-analysis"></a>
</h2>
<p>The main function of the package is <code><a href="../reference/sensemakr.html">sensemakr()</a></code>. This
function performs the most commonly required sensitivity analyses, which
can then be further explored with the print, summary and plot methods
(see details in <code><a href="../reference/print.sensemakr.html">?print.sensemakr</a></code> and
<code><a href="../reference/plot.sensemakr.html">?plot.sensemakr</a></code>). We begin the analysis by applying
<code>sensemakr</code> to the original regression model,
<code>darfur.model</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># runs sensemakr for sensitivity analysis</span></span>
<span><span class="co"># in the darfur example</span></span>
<span><span class="va">darfur.sensitivity</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sensemakr.html">sensemakr</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">darfur.model</span>, </span>
<span>                                treatment <span class="op">=</span> <span class="st">"directlyharmed"</span>,</span>
<span>                                benchmark_covariates <span class="op">=</span> <span class="st">"female"</span>,</span>
<span>                                kd <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,</span>
<span>                                ky <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, </span>
<span>                                q <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                                alpha <span class="op">=</span> <span class="fl">0.05</span>, </span>
<span>                                reduce <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The arguments are:</p>
<ul>
<li><p><strong>model</strong>: the <code>lm</code> object with the
outcome regression. In our case, <code>darfur.model</code>.</p></li>
<li><p><strong>treatment</strong>: the name of the treatment variable.
In our case, <code>"directlyharmed"</code>.</p></li>
<li><p><strong>benchmark_covariates</strong>: the names of covariates
that will be used to bound the plausible strength of the unobserved
confounders. Here, we put <code>"female"</code>, which we argue to be
among the main determinants of exposure to violence and find to be a
strong determinant of attitudes towards peace.</p></li>
<li><p><strong>kd</strong> and <strong>ky</strong>: these arguments
parameterize how many times stronger the confounder is related to the
treatment (<code>kd</code>) and to the outcome (<code>ky</code>) in
comparison to the observed benchmark covariate (<code>female</code>). In
our example, setting <code>kd = 1:3</code> and <code>ky = 1:3</code>
means we want to investigate the maximum strength of a confounder once,
twice, or three times as strong as female (in explaining treatment and
outcome variation). If only <code>kd</code> is given, <code>ky</code>
will be set equal to it by default.</p></li>
<li><p><strong>q</strong>: this allows the user to specify what fraction
of the effect estimate would have to be explained away to be
problematic. Setting <code>q = 1</code>, as we do here, means that a
reduction of 100% of the current effect estimate, that is, a true effect
of <em>zero</em>, would be deemed problematic. The default is
1.</p></li>
<li><p><strong>alpha</strong>: significance level of interest for making
statistical inferences. The default is 0.05.</p></li>
<li><p><strong>reduce</strong>: should we consider confounders acting
towards <em>increasing</em> or <em>reducing</em> the absolute value of
the estimate? The default is <code>reduce = TRUE</code>, which means we
are considering confounders that pull the estimate towards (or through)
zero.</p></li>
</ul>
<p>Using the default arguments, one can simplify the previous call
to:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">darfur.sensitivity</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sensemakr.html">sensemakr</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">darfur.model</span>, </span>
<span>                                treatment <span class="op">=</span> <span class="st">"directlyharmed"</span>,</span>
<span>                                benchmark_covariates <span class="op">=</span> <span class="st">"female"</span>,</span>
<span>                                kd <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p>After running <code><a href="../reference/sensemakr.html">sensemakr()</a></code>, we can now explore the
sensitivity analysis results.</p>
<div class="section level3">
<h3 id="minimal-sensitivity-reporting">Minimal sensitivity reporting<a class="anchor" aria-label="anchor" href="#minimal-sensitivity-reporting"></a>
</h3>
<p>The print method of <code>sensemakr</code> provides a quick review of
the original (unadjusted) estimate along with three summary sensitivity
statistics suited for <em>routine reporting</em>: the partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
of the treatment with the outcome, the robustness value (RV) required to
reduce the estimate entirely to zero
(i.e. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">q=1</annotation></semantics></math>),
and the RV beyond which the estimate would no longer be statistically
distinguishable from zero at the 0.05 level
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">q=1</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mo>=</mo><mn>0.05</mn></mrow><annotation encoding="application/x-tex">\alpha=0.05</annotation></semantics></math>).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">darfur.sensitivity</span></span>
<span><span class="co">#&gt; Sensitivity Analysis to Unobserved Confounding</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model Formula: peacefactor ~ directlyharmed + village + female + age + farmer_dar + </span></span>
<span><span class="co">#&gt;     herder_dar + pastvoted + hhsize_darfur</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Null hypothesis: q = 1 and reduce = TRUE </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Observed Estimates of ' directlyharmed ':</span></span>
<span><span class="co">#&gt;   Coef. estimate: 0.09732 </span></span>
<span><span class="co">#&gt;   Standard Error: 0.02326 </span></span>
<span><span class="co">#&gt;   t-value: 4.18445 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sensitivity Statistics:</span></span>
<span><span class="co">#&gt;   Partial R2 of treatment with outcome: 0.02187 </span></span>
<span><span class="co">#&gt;   Robustness Value, q = 1 : 0.13878 </span></span>
<span><span class="co">#&gt;   Robustness Value, q = 1 alpha = 0.05 : 0.07626 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; For more information, check summary.</span></span></code></pre></div>
<p>The package also provides a function that creates a latex or html
table with these results, as shown below (for the latex table, simply
change the argument to <code>format = "latex"</code>).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/print.sensemakr.html">ovb_minimal_reporting</a></span><span class="op">(</span><span class="va">darfur.sensitivity</span>, format <span class="op">=</span> <span class="st">"html"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead>
<tr>
<th style="text-align:left;border-bottom: 1px solid transparent;border-top: 1px solid black">
</th>
<th colspan="6" style="text-align:center;border-bottom: 1px solid black;border-top: 1px solid black">
Outcome: peacefactor
</th>
</tr>
<tr>
<th style="text-align:left;border-top: 1px solid black">
Treatment
</th>
<th style="text-align:right;border-top: 1px solid black">
Est.
</th>
<th style="text-align:right;border-top: 1px solid black">
S.E.
</th>
<th style="text-align:right;border-top: 1px solid black">
t-value
</th>
<th style="text-align:right;border-top: 1px solid black">
<span class="math inline">$R^2_{Y \sim D |{\bf X}}$</span>
</th>
<th style="text-align:right;border-top: 1px solid black">
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><msub><mi>V</mi><mrow><mi>q</mi><mo>=</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">RV_{q = 1}</annotation></semantics></math>
</th>
<th style="text-align:right;border-top: 1px solid black">
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><msub><mi>V</mi><mrow><mi>q</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>α</mi><mo>=</mo><mn>0.05</mn></mrow></msub></mrow><annotation encoding="application/x-tex">RV_{q = 1, \alpha = 0.05}</annotation></semantics></math>
</th>
</tr>
</thead>
<tbody><tr>
<td style="text-align:left; border-bottom: 1px solid black">
<i>directlyharmed</i>
</td>
<td style="text-align:right;border-bottom: 1px solid black">
0.097
</td>
<td style="text-align:right;border-bottom: 1px solid black">
0.023
</td>
<td style="text-align:right;border-bottom: 1px solid black">
4.184
</td>
<td style="text-align:right;border-bottom: 1px solid black">
2.2%
</td>
<td style="text-align:right;border-bottom: 1px solid black">
13.9%
</td>
<td style="text-align:right;border-bottom: 1px solid black">
7.6%
</td>
</tr></tbody>
<tr>
<td colspan="7" style="text-align:right;border-top: 1px solid black;border-bottom: 1px solid transparent;font-size:11px">
Note: df = 783; Bound ( 1x female ): <span class="math inline">$R^2_{Y\sim Z| {\bf X}, D}$</span> = 12.5%, <span class="math inline">$R^2_{D\sim Z| {\bf X} }$</span> = 0.9%
</td>
</tr>
</table>
<p>These three sensitivity statistics provide a <em>minimal
reporting</em> for sensitivity analysis. More precisely:</p>
<ul>
<li><p>The robustness value for bringing the point estimate of
<code>directlyharmed</code> exactly to zero
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><msub><mi>V</mi><mrow><mi>q</mi><mo>=</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">RV_{q=1}</annotation></semantics></math>)
is 13.9% . This means that unobserved confounders that explain 13.9% of
the residual variance <em>both</em> of the treatment and of the outcome
are sufficiently strong to explain away all the observed effect. On the
other hand, unobserved confounders that <em>do not</em> explain at least
13.9% of the residual variance <em>both</em> of the treatment and of the
outcome are not sufficiently strong to do so.</p></li>
<li><p>The robustness value for testing the null hypothesis that the
coefficient of <code>directlyharmed</code> is zero
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><mi>R</mi><msub><mi>V</mi><mrow><mi>q</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>α</mi><mo>=</mo><mn>0.05</mn></mrow></msub><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(RV_{q =1, \alpha = 0.05})</annotation></semantics></math>
falls to 7.6%. This means that unobserved confounders that explain 7.6%
of the residual variance <em>both</em> of the treatment and of the
outcome are sufficiently strong to bring the lower bound of the
confidence interval to zero (at the chosen significance level of 5%). On
the other hand, unobserved confounders that <em>do not</em> explain at
least 7.6% of the residual variance <em>both</em> of the treatment and
of the outcome are not sufficiently strong to do so.</p></li>
<li><p>Finally, the partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
of <code>directlyharmed</code> with <code>peacefactor</code> means that,
in an <em>extreme scenario</em>, in which we assume that unobserved
confounders explain <em>all</em> of the left out variance of the
outcome, these unobserved confounders would need to explain at least
2.2% of the residual variance of the treatment to fully explain away the
observed effect.</p></li>
</ul>
<p>These are useful quantities that summarize <em>what we need to
know</em> in order to safely rule out confounders that are deemed to be
problematic. Interpreting these values requires domain knowledge about
the data generating process. Therefore, we encourage researchers to
argue about what are plausible bounds on the maximum explanatory power
that unobserved confounders could have in a given application.</p>
<p>Sometimes researchers may have a hard time making judgments regarding
the <em>absolute strength</em> of a confounder, but may have grounds to
make <em>relative claims</em>, for instance, by arguing that unobserved
confounders are likely not multiple times stronger than a certain
observed covariate. In our application, this is indeed the case. One
could argue that, given the nature of the attacks, it is hard to imagine
that unobserved confounding could explain much more of targeting than
what was explained by the observed variable <code>female</code>.</p>
<p>The lower corner of the table, thus, provides bounds on confounding
as strong as female, <span class="math inline">$R^2_{Y\sim Z| {\bf X},
D}$</span> = 12.5%, and <span class="math inline">$R^2_{D\sim Z| {\bf X}
}$</span> = 0.9%. Since both of those are below the RV, the table
reveals that confounders as strong as <code>female</code> are not
sufficient to explain away the observed estimate.</p>
<p>Moreover, the bound on <span class="math inline">$R^2_{D\sim Z| {\bf
X} }$</span> is below the partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
of the treatment with the outcome, <span class="math inline">$R^2_{Y
\sim D |{\bf X}}$</span>. This means that even an extreme confounder
explaining all residual variation of the outcome and as strongly
associated with the treatment as <code>female</code> would not be able
to overturn the research conclusions.</p>
<p>These results are exact for a single unobserved confounder, and
conservative for multiple confounders, possibly acting non-linearly.
Finally, the summary method for <code>sensemakr</code> provides an
extensive report with verbal descriptions of all these analyses. Here,
for instance, entering <code>summary(darfur.sensitivity)</code> produces
verbose output similar to the text explanations in the last several
paragraphs, so that researchers can directly cite or include such text
in their reports.
<!-- I think this can be taken for granted by now: For further details, please refer to [Cinelli and Hazlett (2020)](https://rss.onlinelibrary.wiley.com/doi/full/10.1111/rssb.12348). 
!--> <!--

``` r
summary(darfur.sensitivity)
```
!--></p>
</div>
<div class="section level3">
<h3 id="sensitivity-contour-plots-of-point-estimates-and-t-values">Sensitivity contour plots of point estimates and t-values<a class="anchor" aria-label="anchor" href="#sensitivity-contour-plots-of-point-estimates-and-t-values"></a>
</h3>
<p>The previous sensitivity table provides a good summary of how robust
the current estimate is to unobserved confounding. However, researchers
may be willing to refine their analysis by visually exploring the whole
range of possible estimates that confounders with different strengths
could cause.
<!-- Better I think to just show rather than explain this: On such a plot one may also with to place different bounds on the plausible strength of confounding based on different assumptions on how they compare to observed covariates.!-->
For these, one can use the plot method for <code>sensemakr</code>.</p>
<p>We begin by examining the default plot type, contour plots for the
point estimate.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">darfur.sensitivity</span><span class="op">)</span></span></code></pre></div>
<p><img src="sensemakr_files/figure-html/unnamed-chunk-11-1.png" width="432" style="display: block; margin: auto;"></p>
<p>The horizontal axis shows the hypothetical residual share of
variation of the treatment that unobserved confounding explains, <span class="math inline">$R^2_{D\sim Z| {\bf X} }$</span>. The vertical axis
shows the hypothetical partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
of unobserved confounding with the outcome, <span class="math inline">$R^2_{Y\sim Z| {\bf X}, D}$</span>. The contours
show what would be the estimate for <code>directlyharmed</code> that one
would have obtained in the full regression model including unobserved
confounders with such hypothetical strengths. Note the plot is
parameterized in way that hurts our preferred hypothesis, by pulling the
estimate towards zero—the direction of the bias was set in the argument
<code>reduce = TRUE</code> of <code><a href="../reference/sensemakr.html">sensemakr()</a></code>.</p>
<p>The bounds on the strength of confounding, determined by the
parameter <code>kd = 1:3</code> in the call for
<code><a href="../reference/sensemakr.html">sensemakr()</a></code>, are also shown in the plot. Note that the plot
reveals that the direction of the effect (positive) is robust to
confounding once, twice or even three times as strong as the observed
covariate <code>female</code>, although in this last case the magnitude
of the effect is reduced to a third of the original estimate.</p>
<p>We now examine the sensitivity of the <em>t-value</em> for testing
the null hypothesis of zero effect. For this, it suffices to change the
option <code>sensitivity.of = "t-value"</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">darfur.sensitivity</span>, sensitivity.of <span class="op">=</span> <span class="st">"t-value"</span><span class="op">)</span></span></code></pre></div>
<p><img src="sensemakr_files/figure-html/unnamed-chunk-12-1.png" width="432" style="display: block; margin: auto;"></p>
<p>The plot reveals that, at the 5% significance level, the null
hypothesis of zero effect would still be rejected given confounders once
or twice as strong as <code>female</code>. However, by contrast to the
point-estimate, accounting for sampling uncertainty now means that the
null hypothesis of zero effect <em>would not</em> be rejected with the
inclusion of a confounder three times as strong as
<code>female</code>.</p>
</div>
<div class="section level3">
<h3 id="sensitivity-plots-of-extreme-scenarios">Sensitivity plots of extreme scenarios<a class="anchor" aria-label="anchor" href="#sensitivity-plots-of-extreme-scenarios"></a>
</h3>
<p>Sometimes researchers may be better equipped to make plausibility
judgments about the strength of determinants of the treatment assignment
mechanism, and have less knowledge about the determinants of the
outcome. In those cases, sensitivity plots using <em>extreme
scenarios</em> are a useful option. These are produced with the option
<code>type = extreme</code>. Here one assumes confounding explains
<strong>all</strong> or some large fraction of the residual variance of
the outcome, then vary how strongly such confounding is hypothetically
related to the treatment, to see how this affects the resulting point
estimate.
<!--and examine how the point estimate is affected under different hypothetical strenghts of the association of the confounder with the treatment. !--></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">darfur.sensitivity</span>, type <span class="op">=</span> <span class="st">"extreme"</span><span class="op">)</span></span></code></pre></div>
<p><img src="sensemakr_files/figure-html/unnamed-chunk-13-1.png" width="576" style="display: block; margin: auto;"></p>
<p>The default option for the extreme scenarios is
<code>r2yz.dx = c(1, .75, .5)</code>, which sets the association of
confounders with the outcome to <span class="math inline">$R^2_{Y\sim Z|
{\bf X}, D}$</span>=100%, <span class="math inline">$R^2_{Y\sim Z| {\bf
X}, D}$</span>=75% and <span class="math inline">$R^2_{Y\sim Z| {\bf X},
D}$</span>=50% (producing three separate curves). The bounds on the
strength of association of a confounder once, twice or three times as
strongly associated with the treatment as <code>female</code> are shown
as red ticks in the horizontal axis. As the plot shows, even in the most
extreme case of <span class="math inline">$R^2_{Y\sim Z| {\bf X},
D}$</span>=100%, confounders would need to be more than twice as
strongly associated with the treatment to fully explain away the point
estimate. Moving to the scenarios <span class="math inline">$R^2_{Y\sim
Z| {\bf X}, D}$</span>=75% and <span class="math inline">$R^2_{Y\sim Z|
{\bf X}, D}$</span>=50%, confounders would need to be more than three
times as strongly associated with the treatment as was female in order
to fully explain away the point estimate.</p>
</div>
</div>
<div class="section level2">
<h2 id="a-disciplined-discussion-about-confounding">A disciplined discussion about confounding<a class="anchor" aria-label="anchor" href="#a-disciplined-discussion-about-confounding"></a>
</h2>
<p>Having demonstrated the basic functionality of the package, here we
recall some important caveats on interpretation that apply to any
sensitivity analyses.</p>
<p>The results computed by <code><a href="../reference/sensemakr.html">sensemakr()</a></code> tell us what we need
to be prepared to believe in order to sustain that a given conclusion is
not due to confounding. In particular, the results of the sensitivity
analysis performed here show that, to explain all the observed estimated
effect, even in a worst case scenario where the unobserved confounder
explains all residual variation of the outcome, this unobserved
confounder would need to be more than twice as strongly associated with
the treatment as the covariate <code>female</code>. This is a <em>true
quantitative statement</em> that describes the strength of confounding
needed to overturn the research conclusions.</p>
<p>The analysis, however, says nothing about whether such a confounder
does or does not exist. The role of sensitivity analysis is, therefore,
to <em>discipline the discussion</em> regarding the causal
interpretation of the effect estimate. In particular,</p>
<ol style="list-style-type: decimal">
<li><p>A causal interpretation of the estimate may be defended by
articulating that a confounder with such strength is unlikely. For
instance, one could argue that, given the way injuries (the “treatment”)
occurred, the scope for targeting particular types of individuals was
quite limited; aircraft dropped makeshift and unguided bombs and other
objects over villages, and militia raided without concern for who they
are targeting—the only known major exception to this was targeting
gender, which is one of the most visually apparent characteristics of an
individual, and was a strong factor in targeting.</p></li>
<li><p>Likewise, similar grounds are required to persuasively dismiss a
causal interpretation of the estimate. There are standards of (relative)
strength that the hypothesized unobserved confounders need to meet in
order to be problematic. For instance, a skeptic has to articulate
(using domain knowledge) why a confounder that explains at least more
than twice of the variation of the treatment assignment than the
covariate <code>female</code> is plausible. Otherwise, that confounder
cannot logically account for all the observed association, even in an
extreme scenario.</p></li>
</ol>
<p>Robustness in the face of confounding is thus claimed to the extent
one agrees with the arguments in 1 (which rely on domain knowledge about
attacks in Darfur), while a result can be deemed fragile insofar as
alternative stories meeting the requirements in 2 can be offered.
Sensitivity analyses should not be used to obviate discussions about
confounding by engaging in automatic procedures; rather, they should
stimulate a more disciplined, quantitative argument about confounding,
in which such statements are made and properly debated.</p>
</div>
<div class="section level2">
<h2 id="going-further">Going further<a class="anchor" aria-label="anchor" href="#going-further"></a>
</h2>
<p>The basic functionality demonstrated here will likely suffice for
most users, most of the time. Sometimes, however, more flexibility will
be needed in a given project. When this happens, researchers may resort
directly to other sensitivity functions of the package to customize
their sensitivity analysis. Those functions can be found in the
documentation, and we also provide some examples of those types of
analyses next.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Cinelli, C. Hazlett, C. (2020) “Making Sense of Sensitivity:
Extending Omitted Variable Bias”. Journal of the Royal Statistical
Society, Series B (Statistical Methodology). ( <a href="https://doi.org/10.1111/rssb.12348" class="external-link">link</a> )</p>
<p>Hazlett, C. (2019). Angry or Weary? How Violence Impacts Attitudes
toward Peace among Darfurian Refugees. Journal of Conflict Resolution.(
<a href="https://journals.sagepub.com/doi/pdf/10.1177/0022002719879217?casa_token=XuE5PCptuI0AAAAA:Mcnx00WfCn2skXPgW9WcNGN_f7qxHM_9PvRSdbLiPQUi0MkfW9VFBpNcwnScJPS2xw4NBZjsTU_u9g" class="external-link">link</a>
)</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Carlos Cinelli, Jeremy Ferwerda, Chad Hazlett.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
