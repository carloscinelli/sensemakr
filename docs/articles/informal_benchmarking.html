<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Risks of Informal Benchmarking • sensemakr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The Risks of Informal Benchmarking">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sensemakr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/sensemakr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/informal_benchmarking.html">The Risks of Informal Benchmarking</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/carloscinelli/sensemakr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The Risks of Informal Benchmarking</h1>
                        <h4 data-toc-skip class="author">Carlos Cinelli
and Chad Hazlett</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/carloscinelli/sensemakr/blob/HEAD/vignettes/informal_benchmarking.Rmd" class="external-link"><code>vignettes/informal_benchmarking.Rmd</code></a></small>
      <div class="hidden name"><code>informal_benchmarking.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Informal “benchmarking” procedures have been widely suggested in the
sensitivity analysis literature as a means to aid interpretation. It
intends to describe how an unobserved confounder
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
“not unlike” some observed covariate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mi>j</mi></msub><annotation encoding="application/x-tex">X_j</annotation></semantics></math>
would alter the results of a study (e.g., Imbens, 2003; Blackwell, 2013;
Hosman et al. 2010, Dorie et al., 2016, Hong et al. 2018). <a href="https://doi.org/10.1111/rssb.12348" class="external-link">Cinelli and Hazlett (2020)</a>
show why these proposals may lead users to erroneous conclusions, and
offer formal bounds on the bias that could be produced by unobserved
confounding “as strong” as certain observed covariates.</p>
<p>To aid in understanding and appreciating the risk of informal
benchmarking procedures, this vignette replicates the example in Section
6.1 of <a href="https://doi.org/10.1111/rssb.12348" class="external-link">Cinelli and Hazlett
(2020)</a>, in which such benchmarks produce clearly misleading results.
Replicating this example with <code>sensemakr</code> also provides a
useful tutorial on how users can construct their own sensitivity contour
plots with customized bounds, beyond what is offered by default on the
package.</p>
</div>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>Prior work in sensitivity analysis—dating back at least to Imbens
(2003), and followed by others (e.g, Hosman et al. 2010, Dorie et al.,
2016, Hong et al. 2018)—has proposed comparing observables with
unobservables by informally using statistics of observed variables to
“calibrate intuitions” about sensitivity parameters concerning the
unobserved variable. This practice, however, can have undesirable
consequences, illustrated below. Section 4.4 of <a href="https://doi.org/10.1111/rssb.12348" class="external-link">Cinelli and Hazlett (2020)</a>
provides an alternative. This approach bounds the maximum strength of
confounding given relative judgments on how the strength unobserved
variables compares to the strength of observed variables. The
<code>sensemakr</code> package allows us to compute such bounds using
the function <code><a href="../reference/ovb_bounds.html">ovb_bounds()</a></code>, which we demonstrate below.</p>
</div>
<div class="section level2">
<h2 id="simulating-the-data">Simulating the data<a class="anchor" aria-label="anchor" href="#simulating-the-data"></a>
</h2>
<p>Let us begin by simulating the data generating process used in our
example. Consider a treatment variable
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>,
an outcome variable
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>,
one observed confounder
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>,
and one <em>unobserved</em> confounder
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>.
Again, all disturbance variables
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>U</mi><annotation encoding="application/x-tex">U</annotation></semantics></math>
are standardized mutually independent gaussians, and note that, in
reality, the treatment
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
has <em>no causal effect</em> on the outcome
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right; padding-right: 0"><mi>Z</mi></mtd><mtd columnalign="left" style="text-align: left; padding-left: 0"><mo>=</mo><msub><mi>U</mi><mi>z</mi></msub></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right; padding-right: 0"><mi>X</mi></mtd><mtd columnalign="left" style="text-align: left; padding-left: 0"><mo>=</mo><msub><mi>U</mi><mi>x</mi></msub></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right; padding-right: 0"><mi>D</mi></mtd><mtd columnalign="left" style="text-align: left; padding-left: 0"><mo>=</mo><mi>X</mi><mo>+</mo><mi>Z</mi><mo>+</mo><msub><mi>U</mi><mi>d</mi></msub></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right; padding-right: 0"><mi>Y</mi></mtd><mtd columnalign="left" style="text-align: left; padding-left: 0"><mo>=</mo><mi>X</mi><mo>+</mo><mi>Z</mi><mo>+</mo><msub><mi>U</mi><mi>y</mi></msub></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align}
Z &amp;= U_{z}\\
X &amp;= U_{x}\\
D &amp;= X + Z + U_d\\
Y &amp;= X + Z + U_y
\end{align}</annotation></semantics></math></p>
<p>Also note that, in this model: (i) the unobserved confounder
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
is independent of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>;
and, (ii) the unobserved confounder
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
is <em>exactly like</em>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
in terms of its strength of association with the treatment and the
outcome. The code below creates a sample of size 100 of this data
generating process. We make sure to create residuals that are
standardized and orthogonal so that all properties that we describe here
will hold exactly even in this finite sample.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># loads sensemakr package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/carloscinelli/sensemakr" class="external-link">sensemakr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; See details in:</span></span>
<span><span class="co">#&gt; Carlos Cinelli and Chad Hazlett (2020). Making Sense of Sensitivity: Extending Omitted Variable Bias. Journal of the Royal Statistical Society, Series B (Statistical Methodology).</span></span>
<span></span>
<span><span class="co"># simulates data</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">100</span></span>
<span><span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">Z</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/resid_maker.html">resid_maker</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">X</span><span class="op">)</span> </span>
<span><span class="va">D</span> <span class="op">&lt;-</span> <span class="va">X</span> <span class="op">+</span> <span class="va">Z</span> <span class="op">+</span> <span class="fu"><a href="../reference/resid_maker.html">resid_maker</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">Z</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="va">Y</span> <span class="op">&lt;-</span> <span class="va">X</span> <span class="op">+</span> <span class="va">Z</span> <span class="op">+</span> <span class="fu"><a href="../reference/resid_maker.html">resid_maker</a></span><span class="op">(</span><span class="va">n</span>, <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">Z</span>, <span class="va">D</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="fitting-the-model">Fitting the model<a class="anchor" aria-label="anchor" href="#fitting-the-model"></a>
</h2>
<p>In this example, the investigator does not observe the confounder
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>.
Therefore, she is forced to fit the restricted linear model
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mo>∼</mo><mi>D</mi><mo>+</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y \sim D + X</annotation></semantics></math>,
resulting in the following estimated values</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model.ydx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">D</span> <span class="op">+</span> <span class="va">X</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">model.ydx</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; lm(formula = Y ~ D + X)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residuals:</span></span>
<span><span class="co">#&gt;     Min      1Q  Median      3Q     Max </span></span>
<span><span class="co">#&gt; -3.3274 -0.8791 -0.0560  0.9912  2.5199 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;               Estimate Std. Error t value Pr(&gt;|t|)    </span></span>
<span><span class="co">#&gt; (Intercept) -1.554e-16  1.237e-01   0.000  1.00000    </span></span>
<span><span class="co">#&gt; D            5.000e-01  8.793e-02   5.686 1.37e-07 ***</span></span>
<span><span class="co">#&gt; X            5.000e-01  1.523e-01   3.283  0.00143 ** </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residual standard error: 1.237 on 97 degrees of freedom</span></span>
<span><span class="co">#&gt; Multiple R-squared:    0.5,  Adjusted R-squared:  0.4897 </span></span>
<span><span class="co">#&gt; F-statistic:  48.5 on 2 and 97 DF,  p-value: 2.512e-15</span></span></code></pre></div>
<p>Note we obtain a large and statistically significant coefficient
estimate of the effect of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0.5</mn><annotation encoding="application/x-tex">0.5</annotation></semantics></math>).
However, we know that the variable
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
is not observed, and there is the fear that this estimated effect is in
fact due to the bias caused by
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>.
On the other hand, let us suppose the investigator correctly knows that:
(i)
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
have the same strength of association with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>;
and, (ii)
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
is independent of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>.
Can we leverage this information to understand how much bias a
confounder
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
“not unlike”
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
could cause?</p>
</div>
<div class="section level2">
<h2 id="informal-benchmarks">Informal benchmarks<a class="anchor" aria-label="anchor" href="#informal-benchmarks"></a>
</h2>
<p>Computing the bias due to the omission of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
requires two sensitivity parameters: its partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
with the treatment
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
and its partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
with the outcome
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>.
How could we go about computing the bias that a confounder
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
“not unlike
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>”
would cause?</p>
<p>Intuitively, it seems that we could take as reference the observed
partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>,
and use those as the plausible values for the sensitivity parameters.
That’s the essence of many informal benchmarking proposals. So let us
now compute those observed partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
using the <code><a href="../reference/partial_r2.html">partial_r2()</a></code> function of <code>sensemakr</code>.
For the partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
with the treatment, we also need to fit a treatment regression
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>∼</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">D \sim X</annotation></semantics></math>
first.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># fits treatment regression</span></span>
<span><span class="va">model.dx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">D</span> <span class="op">~</span> <span class="va">X</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># computes observed partial R2 of X</span></span>
<span><span class="va">r2yx.d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/partial_r2.html">partial_r2</a></span><span class="op">(</span><span class="va">model.ydx</span>, covariates <span class="op">=</span> <span class="st">"X"</span><span class="op">)</span></span>
<span><span class="va">r2dx</span>   <span class="op">&lt;-</span> <span class="fu"><a href="../reference/partial_r2.html">partial_r2</a></span><span class="op">(</span><span class="va">model.dx</span>, covariates <span class="op">=</span> <span class="st">"X"</span><span class="op">)</span></span></code></pre></div>
<p>Once both partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
are computed, we can determine the implied adjusted estimate due to an
unobserved confounder
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
using the <code><a href="../reference/adjusted_estimate.html">adjusted_estimate()</a></code> function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">informal_adjusted_estimate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adjusted_estimate.html">adjusted_estimate</a></span><span class="op">(</span><span class="va">model.ydx</span>, </span>
<span>                                                treatment <span class="op">=</span> <span class="st">"D"</span>, </span>
<span>                                                r2dz.x <span class="op">=</span> <span class="va">r2dx</span>, </span>
<span>                                                r2yz.dx <span class="op">=</span> <span class="va">r2yx.d</span><span class="op">)</span></span></code></pre></div>
<p>We can now plot the sensitivity contours with
<code><a href="../reference/ovb_contour_plot.html">ovb_contour_plot()</a></code> and add our informal benchmark with the
numeric method of <code><a href="../reference/add_bound_to_contour.html">add_bound_to_contour()</a></code>. The arguments
<code>label.bump.x</code> and <code>label.bump.y</code> of these
functions allow adjusting the position of the bound label in the
plot.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># draws sensitivity contours</span></span>
<span><span class="fu"><a href="../reference/ovb_contour_plot.html">ovb_contour_plot</a></span><span class="op">(</span><span class="va">model.ydx</span>,  </span>
<span>                 treatment <span class="op">=</span> <span class="st">"D"</span>, </span>
<span>                 lim <span class="op">=</span> <span class="fl">.6</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># adds informal benchmark </span></span>
<span><span class="fu"><a href="../reference/add_bound_to_contour.html">add_bound_to_contour</a></span><span class="op">(</span>r2dz.x <span class="op">=</span> <span class="va">r2dx</span>, </span>
<span>                     r2yz.dx <span class="op">=</span> <span class="va">r2yx.d</span>, </span>
<span>                     bound_value <span class="op">=</span> <span class="va">informal_adjusted_estimate</span>,</span>
<span>                     bound_label <span class="op">=</span> <span class="st">"Informal benchmark"</span><span class="op">)</span></span></code></pre></div>
<p><img src="informal_benchmarking_files/figure-html/unnamed-chunk-7-1.png" width="480" style="display: block; margin: auto;"></p>
<p>As we can see, the results of the informal benchmark are different
from what we expected. The informal benchmark point is still far away
from zero, and this would lead an investigator to incorrectly conclude
that an unobserved confounder
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
“not unlike
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>”
is not sufficient to explain away the observed effect. Moreover, this
incorrect conclusion occurs despite <em>correctly</em> assuming that:
(i)
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
have the same strength of association with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>;
and, (ii)
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
is independent of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>.
Why does this happen?</p>
<p>As explained in Section 6.1 of <a href="https://doi.org/10.1111/rssb.12348" class="external-link">Cinelli and Hazlett
(2020)</a>, there are two problems affecting informal benchmarks in this
setting. First, we have to make an adjustment of baseline variance to be
explained, since the sensitivity parameters consider the partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
with the outcome, after taking into account what is already explained by
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>.
Second, consider the DAG of our structural model:</p>
<p><img src="collider.png" width="307" height="311" style="display: block; margin: auto;"></p>
<p>That is, although
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
is <em>marginally</em> independent of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>,
note that
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
is not <em>conditionally</em> independent of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>,
<em>given</em>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>,
because
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
is a <em>collider</em> (Pearl, 2009). This distorts the observed
quantities of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
that are being used for benchmarking.</p>
</div>
<div class="section level2">
<h2 id="formal-bounds">Formal bounds<a class="anchor" aria-label="anchor" href="#formal-bounds"></a>
</h2>
<p>Given the above considerations, we do not recommend using informal
benchmarks for sensitivity analysis. We now show how to compute formal
bounds. In <code>sensemakr</code>, you can use the function
<code><a href="../reference/ovb_bounds.html">ovb_bounds()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># compute formal bounds</span></span>
<span><span class="va">formal_bound</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ovb_bounds.html">ovb_bounds</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">model.ydx</span>, </span>
<span>                           treatment <span class="op">=</span> <span class="st">"D"</span>, </span>
<span>                           benchmark_covariates <span class="op">=</span> <span class="st">"X"</span>, </span>
<span>                           kd <span class="op">=</span> <span class="fl">1</span>, ky <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>In this function you specify the linear model being used
(<code>model.ydx</code>), the treatment of interest
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>),
the observed variable used for benchmarking
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>),
and how stronger
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
is in explaining treatment (<code>kd</code>) and outcome
(<code>ky</code>) variation, as compared to the benchmark variable
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>.
We can now plot the proper bound against the informal benchmark.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># contour plot</span></span>
<span><span class="fu"><a href="../reference/ovb_contour_plot.html">ovb_contour_plot</a></span><span class="op">(</span><span class="va">model.ydx</span>,  </span>
<span>                 treatment <span class="op">=</span> <span class="st">"D"</span>,</span>
<span>                 lim <span class="op">=</span> <span class="fl">.6</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/add_bound_to_contour.html">add_bound_to_contour</a></span><span class="op">(</span>r2dz.x <span class="op">=</span> <span class="va">r2dx</span>, </span>
<span>                     r2yz.dx <span class="op">=</span> <span class="va">r2yx.d</span>, </span>
<span>                     bound_value <span class="op">=</span> <span class="va">informal_adjusted_estimate</span>,</span>
<span>                     bound_label <span class="op">=</span> <span class="st">"Informal benchmark"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/add_bound_to_contour.html">add_bound_to_contour</a></span><span class="op">(</span>bounds <span class="op">=</span> <span class="va">formal_bound</span>,</span>
<span>                     bound_label <span class="op">=</span> <span class="st">"Proper bound"</span><span class="op">)</span></span></code></pre></div>
<p><img src="informal_benchmarking_files/figure-html/unnamed-chunk-10-1.png" width="480" style="display: block; margin: auto;"></p>
<p>Note that, using the formal bounds, the researcher now reaches the
correct conclusion that, an unobserved confounder
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
similar to
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
is strong enough to explain away all the observed association. For
further details, please see Sections 4.4 and 6.1 of <a href="https://doi.org/10.1111/rssb.12348" class="external-link">Cinelli and Hazlett
(2020)</a>.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Cinelli, C. Hazlett, C. (2020) “Making Sense of Sensitivity:
Extending Omitted Variable Bias”. Journal of the Royal Statistical
Society, Series B (Statistical Methodology). ( <a href="https://doi.org/10.1111/rssb.12348" class="external-link">link</a> )</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Carlos Cinelli, Jeremy Ferwerda, Chad Hazlett.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
