<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Bounds on the strength of unobserved confounders using observed covariates — ovb_bounds • sensemakr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Bounds on the strength of unobserved confounders using observed covariates — ovb_bounds" />
<meta property="og:description" content="Bounds on the strength of unobserved confounders using observed covariates, as in Cinelli and Hazlett (2020). The main generic function is ovb_bounds, which can compute both the bounds on the strength of confounding as well as the adjusted estimates, standard errors, t-values and confidence intervals.
Other functions that compute only the bounds on the strength of confounding are also provided. These functions may be useful when computing benchmarks for using only summary statistics from papers you see in print." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-158095434-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-158095434-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sensemakr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/sensemakr.html">Get started</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="https://www.researchgate.net/publication/340965014_sensemakr_Sensitivity_Analysis_Tools_for_OLS_in_R_and_Stata">Software Paper</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="https://carloscinelli.shinyapps.io/robustness_value/">Shiny App</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/chadhazlett/sensemakr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Bounds on the strength of unobserved confounders using observed covariates</h1>
    <small class="dont-index">Source: <a href='https://github.com/chadhazlett/sensemakr/blob/master/R/ovb_bounds.R'><code>R/ovb_bounds.R</code></a></small>
    <div class="hidden name"><code>ovb_bounds.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Bounds on the strength of unobserved confounders using observed covariates, as in Cinelli and Hazlett (2020). The main generic function is <code>ovb_bounds</code>, which can compute both the bounds on the strength of confounding as well as the adjusted estimates, standard errors, t-values and confidence intervals.</p>
<p>Other functions that compute only the bounds on the strength of confounding are also provided. These functions may be useful when computing benchmarks for using only summary statistics from papers you see in print.</p>
    </div>

    <pre class="usage"><span class='fu'>ovb_bounds</span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for lm</span>
<span class='fu'>ovb_bounds</span><span class='op'>(</span>
  <span class='va'>model</span>,
  <span class='va'>treatment</span>,
  benchmark_covariates <span class='op'>=</span> <span class='cn'>NULL</span>,
  kd <span class='op'>=</span> <span class='fl'>1</span>,
  ky <span class='op'>=</span> <span class='va'>kd</span>,
  reduce <span class='op'>=</span> <span class='cn'>TRUE</span>,
  bound <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"partial r2"</span>, <span class='st'>"partial r2 no D"</span>, <span class='st'>"total r2"</span><span class='op'>)</span>,
  adjusted_estimates <span class='op'>=</span> <span class='cn'>TRUE</span>,
  alpha <span class='op'>=</span> <span class='fl'>0.05</span>,
  h0 <span class='op'>=</span> <span class='fl'>0</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>ovb_partial_r2_bound</span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for numeric</span>
<span class='fu'>ovb_partial_r2_bound</span><span class='op'>(</span>
  <span class='va'>r2dxj.x</span>,
  <span class='va'>r2yxj.dx</span>,
  kd <span class='op'>=</span> <span class='fl'>1</span>,
  ky <span class='op'>=</span> <span class='va'>kd</span>,
  bound_label <span class='op'>=</span> <span class='st'>"manual"</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='co'># S3 method for lm</span>
<span class='fu'>ovb_partial_r2_bound</span><span class='op'>(</span>
  <span class='va'>model</span>,
  <span class='va'>treatment</span>,
  benchmark_covariates <span class='op'>=</span> <span class='cn'>NULL</span>,
  kd <span class='op'>=</span> <span class='fl'>1</span>,
  ky <span class='op'>=</span> <span class='va'>kd</span>,
  adjusted_estimates <span class='op'>=</span> <span class='cn'>TRUE</span>,
  alpha <span class='op'>=</span> <span class='fl'>0.05</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>arguments passed to other methods. First argument should either be (i) an <code><a href='https://rdrr.io/r/stats/lm.html'>lm</a></code> model with the
outcome regression (argument <code>model</code>); (ii) a <code><a href='https://rdrr.io/r/stats/formula.html'>formula</a></code> describing the model along
with the <code><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></code> containing the variables of the model (arguments <code>formula</code> and <code>data</code>); or, (iii) the numerical estimated value of the coefficient, along with the numeric values of standard errors and degrees of freedom (arguments <code>estimate</code>, <code>se</code> and <code>df</code>).</p></td>
    </tr>
    <tr>
      <th>model</th>
      <td><p>An <code>lm</code> object with the outcome regression.</p></td>
    </tr>
    <tr>
      <th>treatment</th>
      <td><p>A character vector with the name of the treatment variable
of the model.</p></td>
    </tr>
    <tr>
      <th>benchmark_covariates</th>
      <td><p>The user has two options: (i)  character vector of the names of covariates that will be used to bound the plausible strength of the unobserved confounders. Each variable will be considered separately; (ii) a named list with character vector names of covariates that will be used, <em>as a group</em>, to bound the plausible strength of the unobserved confounders. The names of the list will be used for the benchmark labels. Note: for factor variables with more than two levels, you need to provide the name of each level as encoded in the <code>lm</code> model (the columns of <code>model.matrix</code>).</p></td>
    </tr>
    <tr>
      <th>kd</th>
      <td><p>numeric vector. Parameterizes how many times stronger the confounder is related to the treatment in comparison to the observed benchmark covariate.
Default value is <code>1</code> (confounder is as strong as benchmark covariate).</p></td>
    </tr>
    <tr>
      <th>ky</th>
      <td><p>numeric vector. Parameterizes how many times stronger the confounder is related to the outcome in comparison to the observed benchmark covariate.
Default value is the same as <code>kd</code>.</p></td>
    </tr>
    <tr>
      <th>reduce</th>
      <td><p>Should the bias adjustment reduce or increase the
absolute value of the estimated coefficient? Default is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>bound</th>
      <td><p>type of bounding procedure. Currently only <code>"partial r2"</code> is implemented.</p></td>
    </tr>
    <tr>
      <th>adjusted_estimates</th>
      <td><p>should the bounder also compute the adjusted estimates? Default is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>significance level for computing the adjusted confidence intervals. Default is 0.05.</p></td>
    </tr>
    <tr>
      <th>h0</th>
      <td><p>Null hypothesis for computation of the t-value. Default is zero.</p></td>
    </tr>
    <tr>
      <th>r2dxj.x</th>
      <td><p>partial R2 of covariate Xj with the treatment D (after partialling out the effect of the remaining covariates X, excluding Xj).</p></td>
    </tr>
    <tr>
      <th>r2yxj.dx</th>
      <td><p>partial R2 of covariate Xj with the outcome Y (after partialling out the effect of the remaining covariates X, excluding Xj).</p></td>
    </tr>
    <tr>
      <th>bound_label</th>
      <td><p>label to bounds provided manually in <code>r2dz.x</code> and <code>r2yz.dx</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function <code>ovb_bounds</code> returns a <code><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></code> with the bounds on the strength of the unobserved confounder
as well with the adjusted point estimates, standard errors and t-values (optional, controlled by argument <code>adjusted_estimates = TRUE</code>).</p>
<p>The function `ovb_partial_r2_bound()` returns only <code><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></code> with the bounds on the strength of the unobserved confounder. Adjusted estimates, standard
errors and t-values (among other quantities) need to be computed manually by the user using those bounds with the functions <code><a href='adjusted_estimate.html'>adjusted_estimate</a></code>, <code><a href='adjusted_estimate.html'>adjusted_se</a></code> and <code><a href='adjusted_estimate.html'>adjusted_t</a></code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Currently it implements only the bounds based on partial R2. Other bounds will be implemented soon.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Cinelli, C. and Hazlett, C. (2020), "Making Sense of Sensitivity: Extending Omitted Variable Bias." Journal of the Royal Statistical Society, Series B (Statistical Methodology).</p>
<p>Cinelli, C. and Hazlett, C. (2020), "Making Sense of Sensitivity: Extending Omitted Variable Bias." Journal of the Royal Statistical Society, Series B (Statistical Methodology).</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># runs regression model</span>
<span class='va'>model</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>peacefactor</span> <span class='op'>~</span> <span class='va'>directlyharmed</span> <span class='op'>+</span> <span class='va'>age</span> <span class='op'>+</span> <span class='va'>farmer_dar</span> <span class='op'>+</span> <span class='va'>herder_dar</span> <span class='op'>+</span>
             <span class='va'>pastvoted</span> <span class='op'>+</span> <span class='va'>hhsize_darfur</span> <span class='op'>+</span> <span class='va'>female</span> <span class='op'>+</span> <span class='va'>village</span>, data <span class='op'>=</span> <span class='va'>darfur</span><span class='op'>)</span>

<span class='co'># bounds on the strength of confounders 1, 2, or 3 times as strong as female</span>
<span class='co'># and 1,2, or 3 times as strong as pastvoted</span>
<span class='fu'>ovb_bounds</span><span class='op'>(</span><span class='va'>model</span>, treatment <span class='op'>=</span> <span class='st'>"directlyharmed"</span>,
          benchmark_covariates <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"female"</span>, <span class='st'>"pastvoted"</span><span class='op'>)</span>,
          kd <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    bound_label      r2dz.x     r2yz.dx      treatment adjusted_estimate
#&gt; 1    1x female 0.009164287 0.124640923 directlyharmed        0.07522027
#&gt; 2    2x female 0.018328573 0.249324064 directlyharmed        0.05291517
#&gt; 3    3x female 0.027492860 0.374050471 directlyharmed        0.03039602
#&gt; 4 1x pastvoted 0.001491963 0.005109456 directlyharmed        0.09551771
#&gt; 5 2x pastvoted 0.002983926 0.010218957 directlyharmed        0.09371690
#&gt; 6 3x pastvoted 0.004475890 0.015328504 directlyharmed        0.09191338
#&gt;   adjusted_se adjusted_t adjusted_lower_CI adjusted_upper_CI
#&gt; 1  0.02187333   3.438904       0.032282966        0.11815758
#&gt; 2  0.02035006   2.600246       0.012968035        0.09286231
#&gt; 3  0.01867006   1.628062      -0.006253282        0.06704533
#&gt; 4  0.02322921   4.111965       0.049918808        0.14111661
#&gt; 5  0.02318681   4.041819       0.048201225        0.13923257
#&gt; 6  0.02314421   3.971334       0.046481338        0.13734543</div><div class='input'>

<span class='co'>#########################################################</span>
<span class='co'>## Let's construct bounds from summary statistics only ##</span>
<span class='co'>#########################################################</span>
<span class='co'># Suppose you didn't have access to the data, but only to</span>
<span class='co'># the treatment and outcome regression tables.</span>
<span class='co'># You can still compute the bounds.</span>

<span class='co'># Use the t statistic of female in the outcome regression</span>
<span class='co'># to compute the partial R2 of female with the outcome.</span>
<span class='va'>r2yxj.dx</span> <span class='op'>&lt;-</span> <span class='fu'><a href='partial_r2.html'>partial_r2</a></span><span class='op'>(</span>t_statistic <span class='op'>=</span> <span class='op'>-</span><span class='fl'>9.789</span>, dof <span class='op'>=</span> <span class='fl'>783</span><span class='op'>)</span>

<span class='co'># Use the t-value of female in the *treatment* regression</span>
<span class='co'># to compute the partial R2 of female with the treatment</span>
<span class='va'>r2dxj.x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='partial_r2.html'>partial_r2</a></span><span class='op'>(</span>t_statistic <span class='op'>=</span> <span class='op'>-</span><span class='fl'>2.680</span>, dof <span class='op'>=</span> <span class='fl'>783</span><span class='op'>)</span>

<span class='co'># Compute manually bounds on the strength of confounders 1, 2, or 3</span>
<span class='co'># times as strong as female</span>
<span class='va'>bounds</span> <span class='op'>&lt;-</span> <span class='fu'>ovb_partial_r2_bound</span><span class='op'>(</span>r2dxj.x <span class='op'>=</span> <span class='va'>r2dxj.x</span>,
                              r2yxj.dx <span class='op'>=</span> <span class='va'>r2yxj.dx</span>,
                              kd <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>,
                              ky <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>,
                              bound_label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>, <span class='st'>"x"</span>, <span class='st'>"female"</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># Compute manually adjusted estimates</span>
<span class='va'>bound.values</span> <span class='op'>&lt;-</span> <span class='fu'><a href='adjusted_estimate.html'>adjusted_estimate</a></span><span class='op'>(</span>estimate <span class='op'>=</span> <span class='fl'>0.0973</span>,
                                 se <span class='op'>=</span> <span class='fl'>0.0232</span>,
                                 dof <span class='op'>=</span> <span class='fl'>783</span>,
                                 r2dz.x <span class='op'>=</span> <span class='va'>bounds</span><span class='op'>$</span><span class='va'>r2dz.x</span>,
                                 r2yz.dx <span class='op'>=</span> <span class='va'>bounds</span><span class='op'>$</span><span class='va'>r2yz.dx</span><span class='op'>)</span>

<span class='co'># Plot contours and bounds</span>
<span class='fu'><a href='ovb_contour_plot.html'>ovb_contour_plot</a></span><span class='op'>(</span>estimate <span class='op'>=</span> <span class='fl'>0.0973</span>,
                se <span class='op'>=</span> <span class='fl'>0.0232</span>,
                dof <span class='op'>=</span> <span class='fl'>783</span><span class='op'>)</span>
</div><div class='input'><span class='fu'><a href='add_bound_to_contour.html'>add_bound_to_contour</a></span><span class='op'>(</span><span class='va'>bounds</span>, bound_value <span class='op'>=</span> <span class='va'>bound.values</span><span class='op'>)</span>
</div><div class='img'><img src='ovb_bounds-1.png' alt='' width='700' height='433' /></div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://carloscinelli.com'>Carlos Cinelli</a>, <a href='https://www.jeremyferwerda.com/'>Jeremy Ferwerda</a>, <a href='https://chadhazlett.com'>Chad Hazlett</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


