<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Computes the partial R2 and partial (Cohen's) f2 — partial_r2 • sensemakr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Computes the partial R2 and partial (Cohen's) f2 — partial_r2" />
<meta property="og:description" content="These functions computes the partial R2 and the partial (Cohen's) f2 for a linear regression model. The partial R2
describes how much of the residual variance of the outcome (after partialing out the other covariates) a covariate explains.
The partial R2 can be used as an extreme-scenario sensitivity analysis to omitted variables.
Considering an unobserved confounder that explains 100% of the residual variance of the outcome,
the partial R2 describes how strongly associated with the treatment this unobserved confounder would need to be in order to explain away the estimated effect.
For details see Cinelli and Hazlett (2020).
The partial (Cohen's) f2 is a common measure of effect size (a transformation of the partial R2) that can also be used directly
for sensitivity analysis using a bias factor table.
The function partial_r2 computes the partial R2. The function partial_f2 computes the partial f2 and the function partial_f the partial f.
They can take as input an lm object or you may pass directly t-value and degrees of freedom.
For partial R2 of groups of covariates, check group_partial_r2." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-158095434-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-158095434-1');
</script>


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sensemakr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/sensemakr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/informal_benchmarking.html">The Risks of Informal Benchmarking</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/chadhazlett/sensemakr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Computes the partial R2 and partial (Cohen's) f2</h1>
    <small class="dont-index">Source: <a href='https://github.com/chadhazlett/sensemakr/blob/master/R/sensitivity_stats.R'><code>R/sensitivity_stats.R</code></a></small>
    <div class="hidden name"><code>partial_r2.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These functions computes the partial R2 and the partial (Cohen's) f2 for a linear regression model. The partial R2
describes how much of the residual variance of the outcome (after partialing out the other covariates) a covariate explains.</p>
<p>The partial R2 can be used as an extreme-scenario sensitivity analysis to omitted variables.
Considering an unobserved confounder that explains 100% of the residual variance of the outcome,
the partial R2 describes how strongly associated with the treatment this unobserved confounder would need to be in order to explain away the estimated effect.
For details see Cinelli and Hazlett (2020).</p>
<p>The partial (Cohen's) f2 is a common measure of effect size (a transformation of the partial R2) that can also be used directly
for sensitivity analysis using a bias factor table.</p>
<p>The function <code>partial_r2</code> computes the partial R2. The function <code>partial_f2</code> computes the partial f2 and the function <code>partial_f</code> the partial f.
They can take as input an <code><a href='https://rdrr.io/r/stats/lm.html'>lm</a></code> object or you may pass directly t-value and degrees of freedom.</p>
<p>For partial R2 of groups of covariates, check <code><a href='group_partial_r2.html'>group_partial_r2</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>partial_r2</span>(<span class='no'>...</span>)

<span class='co'># S3 method for lm</span>
<span class='fu'>partial_r2</span>(<span class='no'>model</span>, <span class='kw'>covariates</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='co'># S3 method for numeric</span>
<span class='fu'>partial_r2</span>(<span class='no'>t_statistic</span>, <span class='no'>dof</span>, <span class='no'>...</span>)

<span class='fu'>partial_f2</span>(<span class='no'>...</span>)

<span class='co'># S3 method for numeric</span>
<span class='fu'>partial_f2</span>(<span class='no'>t_statistic</span>, <span class='no'>dof</span>, <span class='no'>...</span>)

<span class='co'># S3 method for lm</span>
<span class='fu'>partial_f2</span>(<span class='no'>model</span>, <span class='kw'>covariates</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>partial_f</span>(<span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>arguments passed to other methods. First argument should either be an <code>lm</code> object
with the regression model or a numeric vector with the t-value of the coefficient estimate</p></td>
    </tr>
    <tr>
      <th>model</th>
      <td><p>an <code>lm</code> object with the regression model</p></td>
    </tr>
    <tr>
      <th>covariates</th>
      <td><p>model covariates for which the partial R2 will be computed. Default is to compute
the partial R2 of all covariates.</p></td>
    </tr>
    <tr>
      <th>t_statistic</th>
      <td><p><code>numeric</code> vector with the t-value of the coefficient estimates</p></td>
    </tr>
    <tr>
      <th>dof</th>
      <td><p>residual degrees of freedom of the regression</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A numeric vector with the computed partial R2, f2, or f.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Cinelli, C. and Hazlett, C. (2020), "Making Sense of Sensitivity: Extending Omitted Variable Bias." Journal of the Royal Statistical Society, Series B (Statistical Methodology).</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># using an lm object</span>
<span class='co'>## loads data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='st'>"darfur"</span>)

<span class='co'>## fits model</span>
<span class='no'>model</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span>(<span class='no'>peacefactor</span> ~ <span class='no'>directlyharmed</span> + <span class='no'>age</span> + <span class='no'>farmer_dar</span> + <span class='no'>herder_dar</span> +
             <span class='no'>pastvoted</span> + <span class='no'>hhsize_darfur</span> + <span class='no'>female</span> + <span class='no'>village</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>darfur</span>)

<span class='co'>## partial R2 of the treatment (directly harmed) with the outcome (peacefactor)</span>
<span class='fu'>partial_r2</span>(<span class='no'>model</span>, <span class='kw'>covariates</span> <span class='kw'>=</span> <span class='st'>"directlyharmed"</span>)</div><div class='output co'>#&gt; directlyharmed 
#&gt;     0.02187309 </div><div class='input'>
<span class='co'>## partial R2 of female with the outcome</span>
<span class='fu'>partial_r2</span>(<span class='no'>model</span>, <span class='kw'>covariates</span> <span class='kw'>=</span> <span class='st'>"female"</span>)</div><div class='output co'>#&gt;    female 
#&gt; 0.1090339 </div><div class='input'>
<span class='co'># you can also provide the statistics directly</span>
<span class='fu'>partial_r2</span>(<span class='kw'>t_statistic</span> <span class='kw'>=</span> <span class='fl'>4.18445</span>, <span class='kw'>dof</span> <span class='kw'>=</span> <span class='fl'>783</span>)</div><div class='output co'>#&gt; [1] 0.02187309</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Carlos Cinelli, Chad Hazlett.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


