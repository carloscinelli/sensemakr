<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Extreme scenarios plots of omitted variable bias — ovb_extreme_plot • sensemakr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Extreme scenarios plots of omitted variable bias — ovb_extreme_plot" />
<meta property="og:description" content="Extreme scenario plots of omitted variable bias for sensitivity analysis. The main inputs are an lm model, the treatment variable
and the covariates used for benchmarking the strength of unobserved confounding.
The horizontal axis shows the partial R2 of the unobserved confounder(s) with the treatment. The vertical axis shows the adjusted treatment effect estimate.
The partial R2 of the confounder with the outcome is represented by different curves for each scenario, as given by the parameter r2yz.dx.
The red marks on horizontal axis are bounds on the partial R2 of the unobserved confounder kd times as strong as the covariates used for benchmarking.
The dotted red line represent the threshold for the effect estimate deemed to be problematic (for instance, zero).
See Cinelli and Hazlett (2020) for details." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sensemakr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/chadhazlett/sensemakr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extreme scenarios plots of omitted variable bias</h1>
    <small class="dont-index">Source: <a href='https://github.com/chadhazlett/sensemakr/blob/master/R/ovb_plots.R'><code>R/ovb_plots.R</code></a></small>
    <div class="hidden name"><code>ovb_extreme_plot.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Extreme scenario plots of omitted variable bias for sensitivity analysis. The main inputs are an <code><a href='https://rdrr.io/r/stats/lm.html'>lm</a></code> model, the treatment variable
and the covariates used for benchmarking the strength of unobserved confounding.</p>
<p>The horizontal axis shows the partial R2 of the unobserved confounder(s) with the treatment. The vertical axis shows the adjusted treatment effect estimate.
The partial R2 of the confounder with the outcome is represented by <em>different curves</em> for each scenario, as given by the parameter <code>r2yz.dx</code>.
The red marks on horizontal axis are bounds on the partial R2 of the unobserved confounder <code>kd</code> times as strong as the covariates used for benchmarking.
The dotted red line represent the threshold for the effect estimate deemed to be problematic (for instance, zero).</p>
<p>See Cinelli and Hazlett (2020) for details.</p>
    </div>

    <pre class="usage"><span class='fu'>ovb_extreme_plot</span>(<span class='no'>...</span>)

<span class='co'># S3 method for lm</span>
<span class='fu'>ovb_extreme_plot</span>(
  <span class='no'>model</span>,
  <span class='no'>treatment</span>,
  <span class='kw'>benchmark_covariates</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>kd</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>r2yz.dx</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>0.75</span>, <span class='fl'>0.5</span>),
  <span class='kw'>r2dz.x</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>reduce</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>threshold</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>lim</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='no'>r2dz.x</span> + <span class='fl'>0.1</span>, <span class='fl'>0.5</span>)),
  <span class='kw'>legend</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>cex.legend</span> <span class='kw'>=</span> <span class='fl'>0.65</span>,
  <span class='kw'>legend.bty</span> <span class='kw'>=</span> <span class='st'>"n"</span>,
  <span class='no'>...</span>
)

<span class='co'># S3 method for formula</span>
<span class='fu'>ovb_extreme_plot</span>(
  <span class='no'>formula</span>,
  <span class='no'>data</span>,
  <span class='no'>treatment</span>,
  <span class='kw'>benchmark_covariates</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>kd</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>r2yz.dx</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>0.75</span>, <span class='fl'>0.5</span>),
  <span class='kw'>r2dz.x</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>reduce</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>threshold</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>lim</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='no'>r2dz.x</span> + <span class='fl'>0.1</span>, <span class='fl'>0.5</span>)),
  <span class='kw'>legend</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>cex.legend</span> <span class='kw'>=</span> <span class='fl'>0.65</span>,
  <span class='kw'>legend.bty</span> <span class='kw'>=</span> <span class='st'>"n"</span>,
  <span class='no'>...</span>
)

<span class='co'># S3 method for numeric</span>
<span class='fu'>ovb_extreme_plot</span>(
  <span class='no'>estimate</span>,
  <span class='no'>se</span>,
  <span class='no'>dof</span>,
  <span class='kw'>r2dz.x</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>r2yz.dx</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>0.75</span>, <span class='fl'>0.5</span>),
  <span class='kw'>reduce</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>threshold</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>lim</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='no'>r2dz.x</span> + <span class='fl'>0.1</span>, <span class='fl'>0.5</span>)),
  <span class='kw'>legend</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>legend.title</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>cex.legend</span> <span class='kw'>=</span> <span class='fl'>0.65</span>,
  <span class='kw'>legend.bty</span> <span class='kw'>=</span> <span class='st'>"n"</span>,
  <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>cex.lab</span> <span class='kw'>=</span> <span class='fl'>0.7</span>,
  <span class='kw'>cex.axis</span> <span class='kw'>=</span> <span class='fl'>0.7</span>,
  <span class='kw'>list.par</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>oma</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>1</span>)),
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>arguments passed to other methods. First argument should either be an <code><a href='https://rdrr.io/r/stats/lm.html'>lm</a></code> model with the
outcome regression, a <code><a href='https://rdrr.io/r/stats/formula.html'>formula</a></code> describing the model along
with the <code><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></code> containing the variables of the model,
or a numeric vector with the coefficient estimate.</p></td>
    </tr>
    <tr>
      <th>model</th>
      <td><p>An <code>lm</code> object with the outcome regression.</p></td>
    </tr>
    <tr>
      <th>treatment</th>
      <td><p>A character vector with the name of the treatment variable
of the model.</p></td>
    </tr>
    <tr>
      <th>benchmark_covariates</th>
      <td><p>a character vector of the names of covariates that will be used to bound the plausible strength
of the unobserved confounders.</p></td>
    </tr>
    <tr>
      <th>kd</th>
      <td><p>numeric vector. Parameterizes how many times stronger the confounder is related to the treatment in comparison to the observed benchmark covariate.
Default value is <code>1</code> (confounder is as strong as benchmark covariate).</p></td>
    </tr>
    <tr>
      <th>r2yz.dx</th>
      <td><p>Hypothetical partial R2 of unobserved confounder Z
with outcome Y, given covariates X and treatment D.</p></td>
    </tr>
    <tr>
      <th>r2dz.x</th>
      <td><p>Hypothetical partial R2 of unobserved confounder
Z with treatment D, given covariates X.</p></td>
    </tr>
    <tr>
      <th>reduce</th>
      <td><p>Should the bias adjustment reduce or increase the
absolute value of the estimated coefficient? Default is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p>estimate threshold.</p></td>
    </tr>
    <tr>
      <th>lim</th>
      <td><p>sets limit for plot axis. If `lim.y` is also provided, sets limit for x-axis only.</p></td>
    </tr>
    <tr>
      <th>legend</th>
      <td><p>should legend be plotted? Default is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>cex.legend</th>
      <td><p>size of the text for the legend.</p></td>
    </tr>
    <tr>
      <th>legend.bty</th>
      <td><p>legend box. See <code>bty</code> argument of <a href='https://rdrr.io/r/graphics/par.html'>par</a>.</p></td>
    </tr>
    <tr>
      <th>formula</th>
      <td><p>an object of the class <code><a href='https://rdrr.io/r/stats/formula.html'>formula</a></code>: a symbolic description of the model to be fitted.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>data needed only when you pass a formula as first parameter. An object of the class <code><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></code> containing the variables used in the analysis.</p></td>
    </tr>
    <tr>
      <th>estimate</th>
      <td><p>Coefficient estimate.</p></td>
    </tr>
    <tr>
      <th>se</th>
      <td><p>Standard error of the coefficient estimate.</p></td>
    </tr>
    <tr>
      <th>dof</th>
      <td><p>Residual degrees of freedom of the regression.</p></td>
    </tr>
    <tr>
      <th>legend.title</th>
      <td><p>the legend title. If <code>NULL</code>, then default legend is used.</p></td>
    </tr>
    <tr>
      <th>xlab</th>
      <td><p>label of x axis. If `NULL`, default label is used.</p></td>
    </tr>
    <tr>
      <th>ylab</th>
      <td><p>label of y axis. If `NULL`, default label is used.</p></td>
    </tr>
    <tr>
      <th>cex.lab</th>
      <td><p>The magnification to be used for x and y labels relative to the current setting of cex.</p></td>
    </tr>
    <tr>
      <th>cex.axis</th>
      <td><p>The magnification to be used for axis annotation relative to the current setting of cex.</p></td>
    </tr>
    <tr>
      <th>list.par</th>
      <td><p>arguments to be passed to <code><a href='https://rdrr.io/r/graphics/par.html'>par</a></code>. It needs to be a named list.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function returns invisibly the data used for the extreme plot.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Cinelli, C. and Hazlett, C. (2020), "Making Sense of Sensitivity: Extending Omitted Variable Bias." Journal of the Royal Statistical Society, Series B (Statistical Methodology).</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># runs regression model</span>
<span class='no'>model</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span>(<span class='no'>peacefactor</span> ~ <span class='no'>directlyharmed</span> + <span class='no'>age</span> + <span class='no'>farmer_dar</span> + <span class='no'>herder_dar</span> +
                         <span class='no'>pastvoted</span> + <span class='no'>hhsize_darfur</span> + <span class='no'>female</span> + <span class='no'>village</span>,
                         <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>darfur</span>)
<span class='co'># extreme scenarios plot</span>
<span class='fu'>ovb_extreme_plot</span>(<span class='no'>model</span>, <span class='kw'>treatment</span> <span class='kw'>=</span> <span class='st'>"directlyharmed"</span>,
                        <span class='kw'>benchmark_covariates</span> <span class='kw'>=</span> <span class='st'>"female"</span>,
                        <span class='kw'>kd</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>2</span>,
                        <span class='kw'>lim</span> <span class='kw'>=</span> <span class='fl'>0.05</span>)</div><div class='img'><img src='ovb_extreme_plot-1.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Carlos Cinelli, Chad Hazlett.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


