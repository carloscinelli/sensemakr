<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Computes the (extreme) robustness value — robustness_value • sensemakr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Computes the (extreme) robustness value — robustness_value"><meta property="og:description" content="This function computes the (extreme) robustness value of a regression coefficient.
The extreme robustness value describes the minimum strength of association (parameterized in terms of partial R2) that
omitted variables would need to have with the treatment alone in order to change the estimated coefficient by
a certain amount (for instance, to bring it down to zero).
The robustness value describes the minimum strength of association (parameterized in terms of partial R2) that
omitted variables would need to have both with the treatment and with the outcome to change the estimated coefficient by
a certain amount (for instance, to bring it down to zero).
For instance, a robustness value of 1% means that an unobserved confounder that explain 1% of the residual variance of the outcome
and 1% of the residual variance of the treatment is strong enough to explain away the estimated effect. Whereas a robustness value of 90%
means that any unobserved confounder that explain less than 90% of the residual variance of both the outcome and the treatment assignment cannot
fully account for the observed effect. You may also compute robustness value taking into account sampling uncertainty. See details in Cinelli and Hazlett (2020).
The functions robustness_value and extreme_robustness_value can take as input an lm object or you may directly pass the t-value and degrees of freedom.
rv is a shorthand wrapper for robustness_value.
xrv is a shorthand wrapper for extreme_robustness_value."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sensemakr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/sensemakr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/informal_benchmarking.html">The Risks of Informal Benchmarking</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/carloscinelli/sensemakr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Computes the (extreme) robustness value</h1>
    <small class="dont-index">Source: <a href="https://github.com/carloscinelli/sensemakr/blob/HEAD/R/sensitivity_stats.R" class="external-link"><code>R/sensitivity_stats.R</code></a></small>
    <div class="hidden name"><code>robustness_value.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function computes the (extreme) robustness value of a regression coefficient.</p>
<p>The extreme robustness value describes the minimum strength of association (parameterized in terms of partial R2) that
omitted variables would need to have with the treatment alone in order to change the estimated coefficient by
a certain amount (for instance, to bring it down to zero).</p>
<p>The robustness value describes the minimum strength of association (parameterized in terms of partial R2) that
omitted variables would need to have <em>both</em> with the treatment and with the outcome to change the estimated coefficient by
a certain amount (for instance, to bring it down to zero).</p>
<p>For instance, a robustness value of 1% means that an unobserved confounder that explain 1% of the residual variance of the outcome
and 1% of the residual variance of the treatment is strong enough to explain away the estimated effect. Whereas a robustness value of 90%
means that any unobserved confounder that explain less than 90% of the residual variance of both the outcome and the treatment assignment cannot
fully account for the observed effect. You may also compute robustness value taking into account sampling uncertainty. See details in Cinelli and Hazlett (2020).</p>
<p>The functions robustness_value and extreme_robustness_value can take as input an <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></code> object or you may directly pass the t-value and degrees of freedom.</p>
<p><code>rv</code> is a shorthand wrapper for <code>robustness_value</code>.</p>
<p><code>xrv</code> is a shorthand wrapper for <code>extreme_robustness_value</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">robustness_value</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rv</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'lm'</span></span>
<span><span class="fu">robustness_value</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  covariates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  q <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  invert <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'fixest'</span></span>
<span><span class="fu">robustness_value</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  covariates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  q <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  invert <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  message <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">robustness_value</span><span class="op">(</span><span class="va">model</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'numeric'</span></span>
<span><span class="fu">robustness_value</span><span class="op">(</span><span class="va">t_statistic</span>, <span class="va">dof</span>, q <span class="op">=</span> <span class="fl">1</span>, alpha <span class="op">=</span> <span class="fl">0.05</span>, invert <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">extreme_robustness_value</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">xrv</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'lm'</span></span>
<span><span class="fu">extreme_robustness_value</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  covariates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  q <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  invert <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'fixest'</span></span>
<span><span class="fu">extreme_robustness_value</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  covariates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  q <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  invert <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  message <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">extreme_robustness_value</span><span class="op">(</span><span class="va">model</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'numeric'</span></span>
<span><span class="fu">extreme_robustness_value</span><span class="op">(</span></span>
<span>  <span class="va">t_statistic</span>,</span>
<span>  <span class="va">dof</span>,</span>
<span>  q <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  invert <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>arguments passed to other methods. First argument should either be an <code>lm</code> model or a <code>fixest</code> model with the
regression model or a numeric vector with the t-value of the coefficient estimate</p></dd>


<dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>an <code>fixest</code> object with the regression model.</p></dd>


<dt id="arg-covariates">covariates<a class="anchor" aria-label="anchor" href="#arg-covariates"></a></dt>
<dd><p>model covariates for which the robustness value will be computed. Default is to compute
the robustness value of all covariates.</p></dd>


<dt id="arg-q">q<a class="anchor" aria-label="anchor" href="#arg-q"></a></dt>
<dd><p>percent change of the effect estimate that would be deemed problematic.  Default is <code>1</code>,
which means a reduction of 100% of the current effect estimate (bring estimate to zero). It has to be greater than zero.</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>significance level.</p></dd>


<dt id="arg-invert">invert<a class="anchor" aria-label="anchor" href="#arg-invert"></a></dt>
<dd><p>should IRV be computed instead of RV? (i.e. is the estimate insignificant?). Default is <code>FALSE</code>.</p></dd>


<dt id="arg-message">message<a class="anchor" aria-label="anchor" href="#arg-message"></a></dt>
<dd><p>should messages be printed? Default = TRUE.</p></dd>


<dt id="arg-t-statistic">t_statistic<a class="anchor" aria-label="anchor" href="#arg-t-statistic"></a></dt>
<dd><p><code>numeric</code> vector with the t-value of the coefficient estimates</p></dd>


<dt id="arg-dof">dof<a class="anchor" aria-label="anchor" href="#arg-dof"></a></dt>
<dd><p>residual degrees of freedom of the regression</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>The function returns a numerical vector with the robustness value. The arguments q and alpha are saved as attributes of the vector for reference.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Cinelli, C. and Hazlett, C. (2020), "Making Sense of Sensitivity: Extending Omitted Variable Bias." Journal of the Royal Statistical Society, Series B (Statistical Methodology).</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># using an lm object</span></span></span>
<span class="r-in"><span><span class="co">## loads data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"darfur"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## fits model</span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">peacefactor</span> <span class="op">~</span> <span class="va">directlyharmed</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">farmer_dar</span> <span class="op">+</span> <span class="va">herder_dar</span> <span class="op">+</span></span></span>
<span class="r-in"><span>             <span class="va">pastvoted</span> <span class="op">+</span> <span class="va">hhsize_darfur</span> <span class="op">+</span> <span class="va">female</span> <span class="op">+</span> <span class="va">village</span>, data <span class="op">=</span> <span class="va">darfur</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## robustness value of directly harmed q =1 (reduce estimate to zero)</span></span></span>
<span class="r-in"><span><span class="fu">robustness_value</span><span class="op">(</span><span class="va">model</span>, covariates <span class="op">=</span> <span class="st">"directlyharmed"</span>, alpha <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> directlyharmed </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          0.139 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parameters: q = 1, alpha = 1, invert = FALSE </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## extreme robustness value of directly harmed q =1 (reduce estimate to zero)</span></span></span>
<span class="r-in"><span><span class="fu">extreme_robustness_value</span><span class="op">(</span><span class="va">model</span>, covariates <span class="op">=</span> <span class="st">"directlyharmed"</span>, alpha <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> directlyharmed </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         0.0219 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parameters: q = 1, alpha = 1, invert = FALSE </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## note it equals the partial R2 of the treatment with the outcome</span></span></span>
<span class="r-in"><span><span class="fu"><a href="partial_r2.html">partial_r2</a></span><span class="op">(</span><span class="va">model</span>, covariates <span class="op">=</span> <span class="st">"directlyharmed"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> directlyharmed </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     0.02187309 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## robustness value of directly harmed q = 1/2 (reduce estimate in half)</span></span></span>
<span class="r-in"><span><span class="fu">robustness_value</span><span class="op">(</span><span class="va">model</span>, covariates <span class="op">=</span> <span class="st">"directlyharmed"</span>, q <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, alpha <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> directlyharmed </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          0.072 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parameters: q = 0.5, alpha = 1, invert = FALSE </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## robustness value of directly harmed q = 1/2, alpha = 0.05</span></span></span>
<span class="r-in"><span><span class="co">## (reduce estimate in half, with 95% confidence)</span></span></span>
<span class="r-in"><span><span class="fu">robustness_value</span><span class="op">(</span><span class="va">model</span>, covariates <span class="op">=</span> <span class="st">"directlyharmed"</span>, q <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, alpha <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> directlyharmed </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        0.00456 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parameters: q = 0.5, alpha = 0.05, invert = FALSE </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># you can also provide the statistics directly</span></span></span>
<span class="r-in"><span><span class="fu">robustness_value</span><span class="op">(</span>t_statistic <span class="op">=</span> <span class="fl">4.18445</span>, dof <span class="op">=</span> <span class="fl">783</span>, alpha <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.139</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parameters: q = 1, alpha = 1, invert = FALSE </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">extreme_robustness_value</span><span class="op">(</span>t_statistic <span class="op">=</span> <span class="fl">4.18445</span>, dof <span class="op">=</span> <span class="fl">783</span>, alpha <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.0219</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parameters: q = 1, alpha = 1, invert = FALSE </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Carlos Cinelli, Jeremy Ferwerda, Chad Hazlett.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

